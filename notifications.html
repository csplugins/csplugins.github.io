PGJ1dHRvbj5Cb2R5PC9idXR0b24+CjxidXR0b24+SWNvbjwvYnV0dG9uPgo8
YnV0dG9uPkltYWdlPC9idXR0b24+CjxidXR0b24+Qm9keSxJY29uPC9idXR0
b24+CjxidXR0b24+Qm9keSxJbWFnZTwvYnV0dG9uPgo8YnV0dG9uPkljb24s
SW1hZ2U8L2J1dHRvbj4KPGJ1dHRvbj5Cb2R5LEljb24sSW1hZ2U8L2J1dHRv
bj4KPGJyPgo8YnV0dG9uPk9sZCxCb2R5PC9idXR0b24+CjxidXR0b24+T2xk
LEljb248L2J1dHRvbj4KPGJ1dHRvbj5PbGQsSW1hZ2U8L2J1dHRvbj4KPGJ1
dHRvbj5PbGQsQm9keSxJY29uPC9idXR0b24+CjxidXR0b24+T2xkLEJvZHks
SW1hZ2U8L2J1dHRvbj4KPGJ1dHRvbj5PbGQsSWNvbixJbWFnZTwvYnV0dG9u
Pgo8YnV0dG9uPk9sZCxCb2R5LEljb24sSW1hZ2U8L2J1dHRvbj4KPHNjcmlw
dCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgogICAgbmF2aWdhdG9yLnNlcnZp
Y2VXb3JrZXIucmVnaXN0ZXIoJ2NvbnRlbnQvc3cuanMnKTsKICAgIE5vdGlm
aWNhdGlvbi5yZXF1ZXN0UGVybWlzc2lvbigpLnRoZW4oZnVuY3Rpb24gKHBl
cm1pc3Npb24pIHsKICAgICAgICBjb25zb2xlLmxvZyhwZXJtaXNzaW9uKTsK
ICAgIH0pOwoKICAgIGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNl
bGVjdG9yQWxsKCdidXR0b24nKTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwg
YnV0dG9ucy5sZW5ndGg7ICsraSkgewogICAgICAgIHZhciBidXR0b24gPSBi
dXR0b25zW2ldOwogICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdj
bGljaycsIGFzeW5jICgpID0+IHsKICAgICAgICAgICAgYXdhaXQgbm90aWZ5
KGV2ZW50KTsKICAgICAgICB9KTsKICAgIH0KCiAgICB2YXIgbm90aWZ5ID0g
YXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgdmFyIGVsID0gZXZl
bnQudGFyZ2V0IHx8IGV2ZW50LnNyY0VsZW1lbnQ7CiAgICAgICAgdmFyIHR4
dCA9IGVsLmlubmVyVGV4dDsKCiAgICAgICAgaWYgKHR4dC5pbmRleE9mKCJP
bGQiKSA+IC0xKSB7CiAgICAgICAgICAgIGF3YWl0IHNwZWNpYWxOb3RpZmlj
YXRpb24oKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAg
ICAgTm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKGFzeW5jIGZ1bmN0
aW9uIChyZXN1bHQpIHsKICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gJ2dy
YW50ZWQnKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygicmVzdWx0
IGdyYW50ZWQiKTsKICAgICAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5z
ZXJ2aWNlV29ya2VyLmdldFJlZ2lzdHJhdGlvbnMoKS50aGVuKGFzeW5jIGZ1
bmN0aW9uKHJlZ2lzdHJhdGlvbnMpIHsKICAgICAgICAgICAgICAgICAgICBj
b25zb2xlLmxvZygic3cgcmVhZHkiKTsKICAgICAgICAgICAgICAgICAgICBh
d2FpdCByZWdpc3RyYXRpb25zWzBdLnNob3dOb3RpZmljYXRpb24oIk15IFRp
dGxlIiwgewogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiB0eHQuaW5k
ZXhPZigiSWNvbiIpID4gLTEgPyAiaHR0cHM6Ly9pbWFnZXMuZW1vaml0ZXJy
YS5jb20vZ29vZ2xlL25vdG8tZW1vamkvdW5pY29kZS0xNS4xL2NvbG9yLzEw
MjRweC8xZjQzNi5wbmciIDogdW5kZWZpbmVkLAogICAgICAgICAgICAgICAg
ICAgICAgICBib2R5OiB0eHQuaW5kZXhPZigiQm9keSIpID4gLTEgPyAiTXkg
Qm9keSIgOiB1bmRlZmluZWQsCiAgICAgICAgICAgICAgICAgICAgICAgIGlt
YWdlOiB0eHQuaW5kZXhPZigiSW1hZ2UiKSA+IC0xID8gImh0dHBzOi8vbGli
ZXJ0eS5hbGJhbnkuazEyLm9yLnVzL21lZGlhL3NpdGVzLzE4LzIwMjAvMTEv
U29yYS1BcHAtODIweDQ4MC5wbmciIDogdW5kZWZpbmVkLAogICAgICAgICAg
ICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAg
IH0KICAgICAgICB9KTsKCiAgICAgICAgY29uc29sZS5sb2coImVuZCByZXF1
ZXN0UGVybWlzc2lvbiIpOwogICAgfQoKICAgIHZhciBzcGVjaWFsTm90aWZp
Y2F0aW9uID0gYXN5bmMgZnVuY3Rpb24oKSB7CiAgICAgICAgaWYgKCEoIk5v
dGlmaWNhdGlvbiIgaW4gd2luZG93KSkgewogICAgICAgICAgICBhbGVydCgi
VGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgZGVza3RvcCBub3RpZmlj
YXRpb24iKTsKICAgICAgICB9IGVsc2UgaWYgKE5vdGlmaWNhdGlvbi5wZXJt
aXNzaW9uID09PSAiZ3JhbnRlZCIpIHsKICAgICAgICAgICAgYXdhaXQgbm90
aWZ5MihldmVudCk7CiAgICAgICAgfSBlbHNlIGlmIChOb3RpZmljYXRpb24u
cGVybWlzc2lvbiAhPT0gImRlbmllZCIpIHsKICAgICAgICAgICAgYXdhaXQg
Tm90aWZpY2F0aW9uLnJlcXVlc3RQZXJtaXNzaW9uKCkudGhlbihhc3luYyAo
cGVybWlzc2lvbikgPT4gewogICAgICAgICAgICAgICAgaWYgKHBlcm1pc3Np
b24gPT09ICJncmFudGVkIikgewogICAgICAgICAgICAgICAgICAgIGF3YWl0
IG5vdGlmeTIoZXZlbnQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAg
ICB9KTsKICAgICAgICB9CiAgICB9CgogICAgdmFyIG5vdGlmeTIgPSBhc3lu
YyBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICB2YXIgZWwgPSBldmVudC50
YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDsKICAgICAgICB2YXIgdHh0ID0g
ZWwuaW5uZXJUZXh0OwoKICAgICAgICBjb25zb2xlLmxvZygncmVxdWVzdGlu
ZycpOwogICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvblBlcm1pc3Npb24gPSBh
d2FpdCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTsKICAgICAg
ICBjb25zb2xlLmxvZygncmVxdWVzdGVkJywgbm90aWZpY2F0aW9uUGVybWlz
c2lvbiwgTm90aWZpY2F0aW9uLnBlcm1pc3Npb24pOwogICAgICAgIGNvbnN0
IG5vdGlmaWNhdGlvbiA9IG5ldyBOb3RpZmljYXRpb24oIk15IFRpdGxlIiwg
ewogICAgICAgICAgICBpY29uOiB0eHQuaW5kZXhPZigiSWNvbiIpID4gLTEg
PyAiaHR0cHM6Ly9pbWFnZXMuZW1vaml0ZXJyYS5jb20vZ29vZ2xlL25vdG8t
ZW1vamkvdW5pY29kZS0xNS4xL2NvbG9yLzEwMjRweC8xZjQzNi5wbmciIDog
dW5kZWZpbmVkLAogICAgICAgICAgICBib2R5OiB0eHQuaW5kZXhPZigiQm9k
eSIpID4gLTEgPyAiTXkgQm9keSIgOiB1bmRlZmluZWQsCiAgICAgICAgICAg
IGltYWdlOiB0eHQuaW5kZXhPZigiSW1hZ2UiKSA+IC0xID8gImh0dHBzOi8v
bGliZXJ0eS5hbGJhbnkuazEyLm9yLnVzL21lZGlhL3NpdGVzLzE4LzIwMjAv
MTEvU29yYS1BcHAtODIweDQ4MC5wbmciIDogdW5kZWZpbmVkLAogICAgICAg
IH0pOwogICAgICAgIG5vdGlmaWNhdGlvbi5vbnNob3cgPSAoKSA9PiB7CiAg
ICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnc2hv
d24nLCB0cnVlKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3Nob3duJyk7
CiAgICAgICAgfQoKICAgICAgICBjb25zb2xlLmxvZygnbm90aWZpY2F0aW9u
Jywgbm90aWZpY2F0aW9uKTsKICAgIH0KCjwvc2NyaXB0Pgo=
